# 活跃信息与管理系统深度优化方案

本方案将解决主角可见性、界面溢出、投骰区交互以及管理系统的 ID 生成逻辑等问题。

## 1. 活跃信息逻辑修正 (ActiveCodex.vue)
*   **问题**：主角 (char-001) 因 `unlock_condition` 为 `null` 而被隐藏。
*   **对策**：在 [ActiveCodex.vue](file:///d:/Education/Project/Faramita%20Worlds/src/renderer/components/ActiveCodex.vue) 中修改过滤逻辑，强制显示 ID 为 `char-001` 或带有 `player` 标签的人物卡。

## 2. 界面布局与交互优化
*   **修复溢出**：在 [MainGame.vue](file:///d:/Education/Project/Faramita%20Worlds/src/renderer/views/MainGame.vue) 中将 `width: 100vw` 改为 `width: 100%`，以适配侧边栏占据的空间。
*   **投骰区折叠**：在 [CodexZone.vue](file:///d:/Education/Project/Faramita%20Worlds/src/renderer/components/CodexZone.vue) 中增加 `isDiceCollapsed` 状态。
    *   点击“投骰区”头部可切换折叠/展开。
    *   折叠时仅保留头部条，下方投骰区向下退缩并隐藏。
*   **文案修正**：将 [CardEditor.vue](file:///d:/Education/Project/Faramita%20Worlds/src/renderer/components/CardEditor.vue) 中解锁条件的占位符更新为“留空则在遇见前不可见”。

## 3. 管理系统逻辑增强 (ManagerView.vue)
*   **智能 ID 生成**：实现自动查找最小未占用 ID 的逻辑（例如 `char-001`, `char-002` 之后自动生成 `char-003`），替代目前的随机 ID。
*   **新增校验**：在保存新卡片（尤其是人物卡）前增加必填项校验，确保数据完整性。
*   **通用性修复**：确保设定卡、章节卡等所有类型均使用一致的智能 ID 分配逻辑。

**确认后，我将立即执行上述修复，确保系统逻辑严密且界面体验流畅。**