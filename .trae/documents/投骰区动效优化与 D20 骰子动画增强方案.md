# 投骰区动效优化与 D20 骰子动画增强方案

本方案将优化投骰区的交互响应速度，并为投骰动作引入更真实的 3D 动画效果，包括数字面显示、结果对齐及自动复位功能。

## 1. 投骰区响应优化 (CodexZone.vue)
*   **动效时长调整**：将 `active-area` 和 `dice-area` 的 CSS `transition` 时间从 2s 统一缩短为 **1s**，提升界面切换的爽快感。

## 2. 3D D20 骰子动画增强 (DiceTray.vue)
*   **数字面实现**：
    *   使用 `CanvasTexture` 动态生成带有数字 1~20 的材质。
    *   将 20 个不同的材质映射到 20 面体（Icosahedron）的各个面上。
*   **初始与复位逻辑**：
    *   **初始状态**：骰子默认旋转角度调整为展示数字 **“20”** 的正面。
    *   **自动复位**：投掷结果显示 **5秒** 后，通过平滑动画将骰子旋转回初始的“20”面。
*   **投掷动画逻辑**：
    *   当接收到投掷结果时，骰子先进行高速随机旋转模拟“投掷”过程。
    *   动画结束时，根据结果数字计算目标旋转角度，确保结果数字正对相机。
    *   优化旋转减速曲线，使其更加自然。

## 3. 关键技术点
*   **旋转坐标映射**：预先定义 D20 每一个面对应的 Euler 旋转角度。
*   **计时器管理**：使用 `setTimeout` 处理 5 秒后的复位逻辑，并确保在连续投掷时正确清除旧计时器。
*   **CSS 变量/属性更新**：修改 [CodexZone.vue](file:///d:/Education/Project/Faramita%20Worlds/src/renderer/components/CodexZone.vue) 中的 `transition` 属性。

**确认后，我将首先更新投骰区的布局动效，随后重写 DiceTray 的 3D 逻辑。**