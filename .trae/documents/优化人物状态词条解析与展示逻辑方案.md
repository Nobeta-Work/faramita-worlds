# 优化人物状态词条解析与展示逻辑方案

本方案将解决状态词条在活跃信息中的可见性问题，并实现对 `(?)` 秘密前缀及 `[状态名]效果` 格式的智能解析。

## 1. 活跃信息展示逻辑优化 (ActiveCodex.vue)
*   **秘密过滤**：在展示状态列表前，调用 `filterSecretEntries` 过滤掉包含 `(?)` 的条目，确保秘密状态仅在编辑器中可见。
*   **格式解析**：实现状态解析逻辑，将形如 `[至高神性：秩序]无法被幻术系魔法影响` 的字符串拆分为“状态名”和“状态描述”。
*   **UI 增强**：
    *   在详情页中，将状态名（方括号内内容）加粗显示，并赋予特定的颜色区分。
    *   增加容错处理，确保即使 `status` 字段在数据库中缺失（为 `undefined`），也不会导致界面崩溃或隐藏整个状态区域。

## 2. 数据结构稳定性增强 (world.ts)
*   **初始化校验**：在 `updateCard` 方法中，如果发现人物卡缺失 `status` 字段，则自动初始化为空数组，避免前端读取 `.length` 时报错。

## 3. 模板数据更新 (Oort.json)
*   **同步字段**：确保 [Oort.json](file:///d:/Education/Project/Faramita%20Worlds/src/world_template/Oort.json) 中的所有人物卡都包含 `status: []` 字段。
*   **验证数据**：验证伊森的 `status` 词条格式是否正确（例如：`"(?)[至高神性：秩序]无法被幻术系魔法影响"`）。

## 4. 关键代码变更点
*   **`ActiveCodex.vue`**: 
    *   更新 `status` 渲染循环，使用解析函数处理显示文本。
    *   修复 `v-if` 判断逻辑，确保字段缺失时能正常显示标题（或友好占位）。
*   **`world.ts`**: 在数据存入 IndexedDB 前进行结构补全。

**确认后，我将立即修复“状态”不可见的问题，并为您实现更专业的展示效果。**