# UI 架构重构与世界卡管理系统增强方案

本方案将对项目进行深度重构，将世界卡管理与游戏主界面分离，并优化主界面的信息展示逻辑。

## 一、 架构重构 (Architecture Refactoring)

1.  **新增管理视图 (`ManagerView.vue`)**：
    *   作为与 `MainGame.vue` 同级的独立界面。
    *   **左侧导航**：按设定卡、章节卡、人物卡、魔法卡分类切换。
    *   **中心区域**：纵向排列对应分类的所有卡片条目。
    *   **CRUD 功能**：支持完整的增、删、改、查操作。支持在现有分类下追加条目。
    *   **配置集成**：将 API Key、Base URL 等 AI 设置移至此界面的底部或独立设置区域。
2.  **主界面入口 (`App.vue`)**：
    *   引入侧边导航栏（Sidebar），支持在“跑团界面”与“管理后台”之间快速切换。

## 二、 主界面右侧面板优化 (`CodexZone` 重构)

1.  **垂直分割布局**：
    *   **上半部分 (70%)**：展示“活跃信息”。
        *   仅显示当前活跃的**章节卡**。
        *   仅显示已解锁的**人物卡**。
        *   **解锁逻辑修正**：若 `unlock_condition` 为 `null`，视为“未遇见”，在主界面不可见。只有当该字段被填入内容（即已触发遇见逻辑）时才显示。
        *   魔法卡与普通设定卡不再在此处显示，保持界面简洁。
    *   **下半部分 (30%)**：固定展示 **3D 投骰区 (`DiceTray`)**。
2.  **投骰动画优化**：
    *   增加 `isRolling` 状态控制。
    *   在没有投骰需求时，3D 骰子保持静止，减少系统资源占用。

## 三、 数据层增强

1.  **Store 扩展**：在 `WorldStore` 中增加 `addCard` 和 `deleteCard` 方法，直接同步 `Dexie.js` 数据库。
2.  **编辑器升级**：`CardEditor.vue` 将被适配为 `ManagerView` 中的核心编辑组件，支持纵向长表单排布。

**确认后，我将首先调整 App.vue 的路由/视图切换逻辑，随后依次实现管理界面与主界面的重构。**